---
title: "第５章　Flutter&Riverpodにおけるアンチパターン"
---

## 命令形指向を捨てよ
そもそも命令的な指向を捨てることが重要である。
ただ単にこれまでのFragment&ViewModelあるいはActivity、ViewControllerのようなものを
そのまま置き換えるだけでは、Flutterと根本的な齟齬があることを説明する。

## 画面本位の思考も捨てよ
画面本位で思考するのは、古の遺伝子を引きずっている。
宣言型パラダイムやアーキテクチャの観点からいえば、画面は状態写像を射影した結果でしかなく、
目的と手段が本質的に逆転している。
ビジネスロジックとそのロジックに基づく状態が主体であることを意識する必要がある。

## 複雑なフローを如何にして管理するべきか

しばしば、認証やフォーム設計においては、非常に長いフローを管理しなければなりません。

このとき、どのようにして状態を管理するべきでしょうか。

## Providerの依存関係管理
大規模なアプリケーションで依存関係地獄になってしまう可能性がある。
これを防ぐには、状態の方向が一方向であることを意識する必要がある。

## 不正な状態遷移と例外処理の設計
状態遷移図に基づくビジネスロジック設計では、不正な状態遷移を明示的に拒絶（例外）とすることも、
保守性を高めるために重要である。